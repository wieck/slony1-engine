Upgrading Slony
---------------

Here are notes about updating Slony to a newer version.

Upgrading from an earlier version of Slony-I to current: general
------------------------------------------------------------------

When upgrading Slony-I, the Slony installation on all nodes in a cluster
must be upgraded at once, using the slonik command UPDATE FUNCTIONS.

While this requires temporarily stopping replication, it does not
require an outage for applications that submit updates.

The proper upgrade procedure is thus:

	1. Stop the slons on all nodes.  (e.g. - old version of slon)
	2. Install the new version of Slony-I software on all nodes.
	3. Execute a slonik script containing the command

		update functions (id = [whatever]);
		for each node in the cluster.

  If you installed the "altperl" tools via "./configure --with-altperl",
  this step may be done more simply, assuming you have a suitable
  slon_tools.conf file configured.  You may instead run:

  % slonik_update_nodes | slonik

	4. Start all slons. 

Upgrading is also discussed in more detail in the "Admin Guide."  The
section is entitled "Slony-I Upgrade", distributed as
doc/adminguide/slonyupgrade.html in the documentation package.
